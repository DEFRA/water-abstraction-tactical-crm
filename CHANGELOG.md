### Changelog

All notable changes to this project will be documented in this file. Dates are displayed in UTC.

Generated by [`auto-changelog`](https://github.com/CookPete/auto-changelog).

#### [v1.48.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.47.0...v1.48.0)

> 20 July 2020

- Bump lodash from 4.17.15 to 4.17.19 [`#578`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/578)
- New KPI endpoint for Access requests data [`#553`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/553)
- Feat: Adds resource to get role by name [`#577`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/577)
- Feat: Includes role in company contacts response [`#574`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/574)
- feat/water-2644 [`2454ab6`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/2454ab69f76178e24c6852a749093e3338853964)
- feat/water-2644 [`cc84ef0`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/cc84ef03b4d1549241a36d758ce25018a7bcbf73)

#### [v1.47.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.45.0...v1.47.0)

> 3 July 2020

- Fix: Return an error response from getContacts [`#571`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/571)
- Feat/water 2742 address contact tweaks [`#568`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/568)
- Adds APIs for invoice accounts flow [`#566`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/566)
- Feat/water 2710 invoice account api shape [`#560`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/560)
- Add agent company ID and contact ID to invoice account addresses [`#550`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/550)
- Fix tests [`228950b`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/228950b12523f689a984a628dcffe7d842d666f6)
- Modify invoice account addresses to include agent company ID and contact ID [`0b9fb45`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/0b9fb4513a4cd65a3b74180067bd97f220abb3c3)
- Additional tests for invoice account service [`3b66cdc`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/3b66cdc2810f685eea38b5991ab5bf72ad34e511)
- feat/water-2644 [`b948b3d`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/b948b3d70b1a533c834bed8dd8235f4ea21d89e7)
- feat/water2644 [`8d2da07`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/8d2da078546dda7bb8718283612b03b0a8b9a73e)
- feat/water-2644 [`1e55657`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/1e55657fdd966d7e3239699fccbd5ca2f9094bed)
- Additional tests [`d5f4883`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/d5f488381e5374b05962ece90ae8fb4c9024245f)
- Additional tests [`226ec53`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/226ec531b0d4c56e32d29bb62f1b0207fa07b165)
- feat/water2644 [`36cbe96`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/36cbe963bad534c967499d37c5a7ab4fd434c03b)
- feat/water-2644 [`9f174cd`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/9f174cd8c98517583ddee7a359e636368503b079)
- Tweak tests [`1b2aaac`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/1b2aaaccd435d3447daabb5c246392803d24e919)
- feat/water-2644 [`15ab208`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/15ab2080ff8ca5d3ef900c9a981becf0810981ee)
- feat/water-2644 [`b9e71af`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/b9e71af60dc9a3af5e7b2b195e873f9bb9020ed9)
- feat/water-2644 [`2871952`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/28719520fb1c07766db8d602a16150b8a00437c6)
- Trigger Travis [`b0a7aa6`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/b0a7aa6f053996a3e0ee180f18c0883452aa4c33)
- feat/water-2644 [`dd6a8d8`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/dd6a8d8756811944071972142b083449fd017307)

#### [v1.45.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.44.0...v1.45.0)

> 10 June 2020

#### [v1.44.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.41.0...v1.44.0)

> 1 June 2020

- Alters the validation for a licence holder role so that the contactId property is optional [`#530`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/530)
- Add document via CRM API [`#511`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/511)
- Feat: Tear down the test data [`#515`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/515)
- Feat: Add address to invoice account [`#510`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/510)
- Add support for array query params on get invoice licences endpoint [`#513`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/513)
- Feat: Add document roles via CRM API [`#509`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/509)
- Adds invoice account with isTest flag option [`#505`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/505)
- Feat: Add contact via CRM API [`#502`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/502)
- End point to add a contact to a company [`#498`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/498)
- Feat: Allow an address to be added to the CRM [`#496`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/496)
- Adds endpoint to add an address to a company [`#494`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/494)
- Feat: Create and retrieve company endpoints [`#491`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/491)
- Refactors save and get controller handlers [`b0f9e48`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/b0f9e48898e2eb2e67a57e6b4493b6c05d87c879)
- feat/water-2636 [`dfb6140`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/dfb6140c95874f6511e9c4cbabf0cc1d3c138fdf)
- feat/water-2636 [`25ea0c8`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/25ea0c85a0c49c81f832d97d78d6b50da6439e15)
- feat/water-2636 [`f23ffa5`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/f23ffa5d89971cdba8a2919a2331a9c6fe5feb8f)
- feat/water-2635 [`72176b0`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/72176b04a32c883d2aef62c4836c8b2981ff4c4f)
- feat/water-2636 [`3192d84`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/3192d844b99128a63cd4475b194509964eb177a7)
- feat/water-2636 [`b30c8a0`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/b30c8a00e755e7225c83cbe6e1ab861e6c51c16b)
- Use joi date extensions to validate dates.  Add tests for route handler [`2b48162`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/2b48162382da5aff547e6dc341450a6122806e1a)
- feat/water-2636 [`904f1f4`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/904f1f44aaf3e8a40e6844fa659fc95bb9bfc04b)
- Updates code to map validation errors to Boom response [`a31c790`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/a31c790fc1278bb8ecaf652b93b3268cd1cae06c)
- feat/water-2636 [`1ce297e`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/1ce297e6aa3b47a49d0d6725d4a03ecdfdbc5703)
- feat/water-2635 [`5865f24`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/5865f2462715a0da52059a31479d9a5ba89aaad9)
- Controller tests [`252f59b`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/252f59ba1a42fe669fe3177093a5aa7d34dc0eae)
- Add tests for CompanyAddress bookshelf model [`7150c96`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/7150c96f15560ccc0419e52e0aaa044431e61287)
- Add service tests [`0ef5a47`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/0ef5a47e4900cd93f8b725c4b9652d0975b66bd1)
- Repository tests [`f3ecd0b`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/f3ecd0b44bf479e9415fccef6a78ee5eda9570dc)
- feat/water-2636 [`2353539`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/2353539fdbece720b83bb173a1d3fe834aea22b8)
- feat/water-2636 [`9e55021`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/9e550214debce745226631d7c5f18e710968f2ac)
- Updates the route validation [`0780b19`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/0780b19509084779d00f1ff2d1cf0b3b96c74a4c)
- Fix mistaken use of Promise.all [`6516c56`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/6516c563bcb53efcee63885d8177e2943c3a27ab)
- Delete launch.json [`9ddcd73`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/9ddcd73d8a1e4d2da961273c904320dfb47b128f)
- feat/water-2635 [`df2aa24`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/df2aa24380c070720471da6525a9b665628e7e29)
- feat/water-2636 [`f027bb2`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/f027bb27578247a99bddc184cee7189b5044425e)
- feat/water-2636 [`f5f5048`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/f5f5048c3d04a10b66ee3fedd4f6709ee28e0dec)
- code refactored for standardisation [`ea8ff47`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/ea8ff47fc53ae02e1ef0bc0e8db63a8c29e0c17a)
- feat/water-2636 [`4080c8d`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/4080c8db8d215c61499f99b70f0efb9469098efd)
- feat/water-2636 [`531d07a`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/531d07a53fe7e48880f793112d1f6587775920ae)
- feat/water-2636 [`c9abb0a`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/c9abb0a4f3a020fc489815ebfde413b9e0a04f0f)
- feat/water-2636 [`4571043`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/4571043e187f10253614cb23dde033fe415b87d0)
- git ignore updated [`f238f50`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/f238f50ee705999b17e75fbf840bfe051504a3bd)
- Force Travis restart #3 [`6f27b6f`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/6f27b6fe70542167c6133f239630b857ef4ccf2f)
- Force Travis restart [`67170af`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/67170af247a3663d888fe6906c3032f0b5876cdd)
- Force Travis restart [`2d11140`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/2d1114099a779bb9ab000cfda2fbc894cc9e117f)
- Empty commit [`db2ad24`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/db2ad241bdd5e85d6773c8a78e681a96c3db2a4d)
- Empty -commit [`db92d53`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/db92d5372355b24316c917b51db3232361e1babe)

#### [v1.41.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.40.0...v1.41.0)

> 14 April 2020

#### [v1.40.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.39.0...v1.40.0)

> 14 April 2020

- Feat: Create and retrieve company endpoints [`86a847d`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/86a847d70cc7ebcaa1d2ca74e2448f7d11d22bec)

#### [v1.39.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.38.0...v1.39.0)

> 27 March 2020

#### [v1.38.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.37.0...v1.38.0)

> 16 March 2020

- Feat: Graceful shutdown for pg pool [`#470`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/470)

#### [v1.37.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.36.2...v1.37.0)

> 28 February 2020

- Bug fix/reallocate connections [`#466`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/466)

#### [v1.36.2](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.36.1...v1.36.2)

> 25 February 2020

- Bug fix/update connection pool allocation [`#465`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/465)
- Fix: Reallocate database connections [`eade5b0`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/eade5b0fa9b3a5329ef637e9296d1e18af3e946b)

#### [v1.36.1](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.34.0...v1.36.1)

> 25 February 2020

- Adds current address/address history to invoice account API [`#453`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/453)
- Chore: Updates node version in .nvmrc [`#448`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/448)
- Chore(deps-dev): Bump snyk from 1.279.0 to 1.280.1 [`#443`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/443)
- Chore: Pre work for upgrading to Node v12 [`#440`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/440)
- Fix issue with colleagues endpoint (breaks share access flow) [`#437`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/437)
- Chore: Update connection pool distribution [`#438`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/438)
- Feat: Get a single invoice account by id [`#432`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/432)
- Feat: More graceful shutdown [`#421`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/421)
- Use db.createPool from water-abstraction-helpers. [`#417`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/417)
- Feat: Add resource to get invoice accounts [`#414`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/414)
- Modify pg to returns date fields in format YYYY-MM-DD [`#403`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/403)
- Feat: Get contacts from the v2 crm [`#405`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/405)
- Return current invoice account address in v2 documents API [`#394`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/394)
- Fix: Improves the query time for select company queries [`#401`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/401)
- Fix: Updates all documents.externalId values [`#395`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/395)
- Fixes an issue where billing roles were not retrieved for documents [`#393`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/393)
- Update some dependencies [`448a4e3`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/448a4e319edfe91135654b331def25976acb2c78)
- Fix: Updates connection pool allocations [`3d357ea`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/3d357eada63998ef62f4be439cc6c6b808646c61)
- Add initials to contact returned from v2 documents API [`13756cd`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/13756cd386c0b0907fb7956a35a56a8d84f7e6cf)
- Review comments - use pg libraries built in definition of date type [`729ab14`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/729ab14a44233d1b521f87e44e8c479d3a322a5d)

#### [v1.34.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.33.0...v1.34.0)

> 26 November 2019

- Modify not null constraint on crm_v2.document_roles [`#382`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/382)
- Chore: Updates ids to uuid data type [`#374`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/374)
- Chore: Update dependencies [`#381`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/381)
- Fixes an issue where billing roles were not retrieved for documents [`86d12c1`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/86d12c1010690d6961b4682aa09831433997a49a)

#### [v1.33.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.32.0...v1.33.0)

> 13 November 2019

- Chore: Updates ids to uuid data type [`677b3b3`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/677b3b341bd140d0fc58eeb4e47913f74cc3464f)
- Changes foreign key drops [`9089b98`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/9089b989990df3d988dbdb7ff1c3074fc2f5b074)

#### [v1.32.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.31.0...v1.32.0)

> 30 October 2019

- Feat: Renames iasAccountNumber to invoiceAccountNumber [`#366`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/366)

#### [v1.31.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.30.0...v1.31.0)

> 15 October 2019

- Feat/v2 docs api [`#357`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/357)
- Feat: Adds resources to delete acceptance test data [`#351`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/351)
- Feat/water 2322 unique external [`#355`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/355)

#### [v1.30.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.29.0...v1.30.0)

> 7 October 2019

- Migrations to allow the linking of invoice accounts and addresses for… [`#346`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/346)
- Include returns agent in CRM document contacts call [`#337`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/337)
- Create tables for new tactical CRM structure [`#335`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/335)
- Feat: Adds resources to delete acceptance test data [`7c9d0f6`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/7c9d0f65f0f6a8f3b1462c3be73101ad38302457)
- Add pgcrypto module to ensure gen_random_uuid() function is available in migrations [`eab6bd2`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/eab6bd2ea9260b69e48846146812297e12c313db)

#### [v1.29.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.28.0...v1.29.0)

> 4 September 2019

- Allow document_header.document_name to be null. [`#327`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/327)
- Allow document_header.document_name a null. [`9f041cf`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/9f041cf22cd28e1ad8fda27dc24b7e061a86b842)

#### [v1.28.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.27.0...v1.28.0)

> 22 August 2019

- Chore/2169 add test for status endpoint [`#296`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/296)
- Merge tag 'charging-sprint-1' into develop [`9ce494d`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/9ce494dcc13f8848c2843eeabc35cd6addaf8a02)
- Updates dependencies [`4a64745`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/4a64745d8df602cee73c4b4cafe5b9174351c93c)
- Chore: Adds tests for the /status endpoint [`1227894`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/1227894873d77edd976ded5b4c9e99397930d63f)

#### [v1.27.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.26.0...v1.27.0)

> 24 July 2019

- Merge tag 'sprint-42' into develop [`254d30b`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/254d30b9b8690a008962894caa923a983a46af79)

#### [v1.26.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.25.0...v1.26.0)

> 9 July 2019

- For document users call: [`#275`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/275)
- Feat: Adds the version to the status response [`#272`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/272)
- Updates the /status route description [`9dc792b`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/9dc792b8f23122936960ddbc84087a82b2961f6d)

#### [v1.25.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.24.0...v1.25.0)

> 27 June 2019

- Feat: Adds the version to the status response [`6ccaa2d`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/6ccaa2dda531b1dac5e22cc06a06c4d6c5350b8c)

#### [v1.24.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.23.0...v1.24.0)

> 12 June 2019

- Chore: Move port from env to config [`#248`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/248)
- Update CHANGELOG.md [`8498c1a`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/8498c1ac82f9a028af12ddc0a2a9fd91aad11bcb)

#### [v1.23.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.22.0...v1.23.0)

> 29 May 2019

- Chore: Update logger to latest version [`#240`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/240)
- Chore: Update eslint and use shared logger [`#232`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/232)

#### [v1.22.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.20.1...v1.22.0)

> 15 May 2019

#### [v1.20.1](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.19.0...v1.20.1)

> 23 April 2019

- Only log error level messages in production [`#220`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/220)
- Feat: Allow expired documents to be found [`#213`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/213)

#### [v1.19.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.18.0...v1.19.0)

> 2 April 2019

#### [v1.18.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.17.0...v1.18.0)

> 19 March 2019

#### [v1.17.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.16.0...v1.17.0)

> 7 February 2019

- Fix: Entity companies returns 200 for no companies [`#165`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/165)
- Feat: Updates grouping in '/crm/{documentId}/users' [`#163`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/163)
- Feat: Adds /documents/{id}/users [`#162`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/162)
- Feat: Adds a resource for getting user companies [`#158`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/158)
- Include licence holder name in document header search API [`#161`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/161)
- Fix: Remove emails [`e226f21`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/e226f219f6c09133c8fe580db4f1aa16e723e92f)
- Merge tag 'public_beta_1.16' into develop [`adf715f`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/adf715fca512058e19c2ec893aae0f8145ed8e3d)

#### [v1.16.0](https://github.com/DEFRA/water-abstraction-tactical-crm/compare/v1.15.0...v1.16.0)

> 23 January 2019

- Include contact initials in contact data from contacts API call [`#154`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/154)
- Chore: Adds the repository to the package.json [`#139`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/139)
- Merge tag 'public_beta_1.15' into develop [`af3a194`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/af3a194a7701cea735a1f7c3da1b92d7f16f7f17)

#### v1.15.0

> 12 December 2018

- Fix: Check for verified documents by company id [`#135`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/135)
- Feat: Use logger instead of request.log for errors [`#133`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/133)
- Switch to NPM version of hapi-pg-rest-api.  Removes deprecated POST A… [`#128`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/128)
- Fix: Corrects a document_header record [`#122`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/122)
- Bump snyk from 1.110.1 to 1.110.2 [`#121`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/121)
- Bump snyk from 1.83.0 to 1.110.1 [`#119`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/119)
- Feat: Consolidate env variables [`#109`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/109)
- Feat: Aligns with developer standards [`#117`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/117)
- Feat: Adds proxy support for logging to Errbit [`#98`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/98)
- Feature: Improve logging [`#97`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/97)
- Fix: Update airbrake js [`#96`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/96)
- Feat: Separate test tasks [`#95`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/95)
- Feat/water 1315 change access [`#94`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/94)
- Feature: Handle entity name casing [`#93`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/93)
- Feature: Adds a resource to delete verifications [`#92`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/92)
- Add ability to filter documents based on one or more user roles [`#91`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/91)
- Feat: Remove permissions JSONB field from entity_roles [`#90`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/90)
- Feat: Updates queries now isPrimary has gone. [`#89`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/89)
- Remove unused tables [`#87`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/87)
- Update hapi-pg-rest API version [`#86`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/86)
- Adds connection pool logging [`#85`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/85)
- WATER-1271: Add permissions to entity_roles [`#84`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/84)
- Adds ecosystem.config.json for PM2 [`#83`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/83)
- Include new contacts in metadata endpoint [`#82`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/82)
- Use UUID package over self authored uuid generator [`#81`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/81)
- Feat/water 986 hapi 17 [`#80`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/80)
- Include company entity ID [`#78`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/78)
- Return company entity details in contacts API [`#77`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/77)
- Include system_internal_id in results from contacts call [`#76`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/76)
- Return company-level 'notifications' entity in contacts call [`#75`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/75)
- Add document contacts to support area import [`#72`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/72)
- Feature/service dashboard [`#74`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/74)
- Create /kpi endpoint using a view [`#73`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/73)
- Remove git+ [`#71`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/71)
- Include dates and company_entity_id in response [`#70`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/70)
- Contacts endpoint lists all contacts organised by licence [`#69`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/69)
- Feat/water 930 [`#68`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/68)
- add /document_verifications endpoint to support internal view of conf… [`#67`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/67)
- Ensure only current licences are displayed [`#66`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/66)
- Bugfix/role doc speed [`#65`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/65)
- Move roles to database and create endpoints for query roles and entit… [`#64`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/64)
- Bugfix/water 922 [`#63`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/63)
- Bugfix/water 767 [`#62`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/62)
- Add expiry date in document role view [`#61`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/61)
- Improve Travis unit test pipeline [`#60`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/60)
- Adding readme [`#58`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/58)
- Less console output [`#57`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/57)
- stop that. it's too much data for admin users [`#56`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/56)
- Dependency tweaks for Snyk [`#55`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/55)
- update-hapi-pgi-rest-api [`#54`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/54)
- role_document_access view exposed at document_role_access endpoint to… [`#50`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/50)
- Was causing /admin/crm/documents to error [`#49`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/49)
- Add support for pagination in document filter endpoint [`#48`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/48)
- fix permissions issue [`#47`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/47)
- jsonb [`#46`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/46)
- Feat/water 600 [`#45`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/45)
- WATER-736 - Can't register licences - 'Something went wrong' after 's… [`#44`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/44)
- Modify roles query. [`#43`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/43)
- optimize-roles-view [`#42`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/42)
- Allow document company entity to be null to allow reset of association [`#41`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/41)
- Update hapi-pg-rest-api to version with default pagination [`#40`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/40)
- Remove licence holder from search when filtering documents [`#39`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/39)
- Remove unique name/type constraint [`#38`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/38)
- Feat/water 609 [`#37`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/37)
- Remove confusing chars from verification shortcodes [`#36`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/36)
- include company in entity_id search for roles [`#35`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/35)
- Fix issue where empty array supplied in REST API filter param [`#34`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/34)
- FIx issue where document_id changed on upsert [`#33`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/33)
- Feat/rest api [`#32`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/32)
- enable colleague sort for licence access [`#31`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/31)
- Adding ability to filter licences by array or null values.  Adding ve… [`#28`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/28)
- Add water-abstraction regime to db-migrate [`#30`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/30)
- merge release db changes to develop [`#29`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/29)
- document header upsert support [`#26`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/26)
- Fix filtering on email address when individual entity_id specified [`#25`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/25)
- modify role query [`#24`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/24)
- Feat/water 562 [`#23`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/23)
- fix admin issue caused by assuming entity id is always present [`#21`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/21)
- add summary data to licence list [`#20`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/20)
- Unbreak email search [`#19`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/19)
- Fix "Dave Broke The JSON Filter" issue [`#18`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/18)
- sort by external id [`#17`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/17)
- Remove JSON from distinct query and modify sort to use custom name [`#16`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/16)
- Feature/modify search to use view [`#15`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/15)
- fix bug with naming licences [`#14`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/14)
- Role based search [`#13`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/13)
- Support for new view listing all documents available to a role... [`#12`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/12)
- migration scripts [`#11`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/11)
- Feature/move licence custom name to metadata [`#10`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/10)
- use roles in query [`#9`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/9)
- Add jsdoc config [`#8`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/8)
- add jsdoc [`#7`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/7)
- Add sorting, JSDOc comments [`#6`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/6)
- Add ability to search on licence number.  Add % to search query for p… [`#5`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/5)
- Feature/roles support [`#3`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/3)
- include roles in entity response [`#4`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/4)
- Feature/water 564 [`#2`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/2)
- add params to search in CRM [`#1`](https://github.com/DEFRA/water-abstraction-tactical-crm/pull/1)
- breaking changes JWT + node 8 [`dfcbccb`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/dfcbccb4d05c5eeb79270809cd6494dbdd942626)
- Removes unused function [`06e281b`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/06e281b9a58d7b4dd30a019a9cfea90c6fb1a3f5)
- Merge tag 'public_beta_1.13' into develop [`12b6458`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/12b6458469d731118db6274944209329b0f229d3)
- Amend delete colleague so that it checks roles of individual altering colleague.  Add unit test for grant/delete role [`aa53819`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/aa53819bbec56c57d050080b33f764835a87b921)
- Bumps up har-validator version to 5.1.3 [`86fdf6c`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/86fdf6c7bd7796d7e047d7d2cc8114778591bb22)
- Merge tag 'public_beta_1.12' into develop [`e97e2a0`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/e97e2a0785e209151a548c2f1fc114af2f6a794c)
- Merge tag 'public_beta_1.11' into develop [`2eeab32`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/2eeab324d86fe3c78d59e84e92e7255caeffbfcf)
- WATER-986: Upgrade to HAPI 17 [`17281a4`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/17281a48cd8b98394b21aa43d2f8fbea0a2e6f00)
- Feature: Allow colleague with returns role [`a208c6a`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/a208c6a819846152b1e1593e275b0d3fc8eec004)
- De-duplicating contacts [`39d6599`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/39d65996191c1941ed7d1b430f03c436462fe536)
- Remove redundant code [`da85702`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/da857022ed3be4c3adc97b371a474ba58f5e99b1)
- Refactor, also return postal address for primary_user as they have verified this by letter [`1690d39`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/1690d396c76e35e1232f2286806165414efc8a7b)
- Improve readability [`b51a9fa`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/b51a9fabc23d0336591c9564bf6aaba51adcd5b9)
- Expose find single entity resource [`a883b10`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/a883b1012294ea7491b13b2c38de39968aa55083)
- Additional queries for dashboard [`e1bc3fc`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/e1bc3fc0fe8f394dee697666ad3c5b5200c32e48)
- Refactor, add comments [`598c4f9`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/598c4f98753966ff94bdc7428561e1c2a86e3c94)
- Refactor [`8aaa1d2`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/8aaa1d2ae709a957917c7359cd91d65939ee2074)
- add /document_verifications endpoint to support internal view of confirmation code [`75d827f`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/75d827f2ba20404ecbed000f50070783e010a58b)
- More tidying [`230822f`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/230822fb99f95341412498f4db499bf707e23d45)
- Update the unique constraint on entity_roles [`c2d3596`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/c2d3596065542d1e05890cbb4da70a07514cc34f)
- Ensure user role taken into consideration for building contacts list.  De-duplicate licence holder in list. [`41956ba`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/41956ba9db38bd1ea016038c79aaa93dc00585ed)
- Fix issue with empty body [`8e71566`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/8e71566afb408477ca47504e6b34f777b08006d1)
- Additional CRM KPI queries [`b455f6b`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/b455f6b6409d63dbdd37a8d5cd65160339341e3a)
- Handle case of non-primary user attempting to grant access, add unit test [`04275d2`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/04275d222228af155d58453c11c07ff4136015d7)
- Add test for deleting non-existent role [`cb8cd88`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/cb8cd881fb28dff5bf17e36f0b0938d0353a1416)
- Move delete colleague query to own function [`3c02e72`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/3c02e72accccf3095ea5e979adfef8ec61bb860e)
- Update hapi-pg-rest-api to support multi-record delete endpoint [`3793467`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/3793467f8dfe31c37ecb34ed80676008753cc58f)
- Fix issue with promises deleting entities in unit tests [`c26966f`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/c26966f15a41a2d7dd513951eec7612fd863bdcf)
- Merge tag 'public_beta_1.6' into develop [`c05970f`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/c05970f4ff4012f5c5410f94a9edd437118d6880)
- Move migrations to root level [`bba5ca6`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/bba5ca6524baa68490f661d6da2fb3f80d70f9f9)
- initial [`2f7b5e2`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/2f7b5e2b59cbd958bb47ebe8f1f6a5a2c3d321b2)
- Update NPM packages [`2ba8ed6`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/2ba8ed69553b488a080a1b3ec9060e373e30c661)
- Remap document filter call to HAPI PG rest API call, move document name to document table [`fab45bc`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/fab45bc9ef4ba80f7b5f1ea5e96f473ee75b5c32)
- migration scripts for companies [`08f5fce`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/08f5fce31db11901bb751739089a0c755fc4b00a)
- Move all custom filtering to document headers preSelect [`4ea398b`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/4ea398b8e0de81eb74b56fdf509a35a10354310a)
- Tweaks to HAPI REST API, test script [`7501c4a`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/7501c4a02bf7eb05f824d61b2be22deb1fa24ccc)
- Adding packages for codecov report [`26900f0`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/26900f0984f554ef73d074d6d64286cadf8394e6)
- Adding APIs to CRM for licence verification step [`9009212`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/9009212ff6fa81ded674dfa819a8ac686bb458d3)
- Adding ability to filter licences by array or null values.  Adding verified and verification_id fields to role_document_access view. [`a1974e0`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/a1974e027a9f8e19be5b438b3ea57495b5aa4a7a)
- Remove old rest-api implementation [`92d922a`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/92d922aa474d51e7acb4f6d91bb49b45f0e767e8)
- Tweaking REST API for verifications [`f716cf5`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/f716cf54cc2ce485b8fd2aea5bb8f4a2be954d9f)
- Move roles to database and create endpoints for query roles and entity_roles [`dd1e6bc`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/dd1e6bc785e20fa33fd2628b3a31dff48d6acb83)
- Removing deprecated routes, updating others to use REST API module [`a3f3ffe`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/a3f3ffed86133a303e9f560f716fbdb486ae5541)
- Convert entity roles to REST API [`bcd2bff`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/bcd2bff6d200d6794d934daabde8a2fa375cec35)
- Removing old API code [`5e79336`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/5e793367756eae990742c6408712f763b380e595)
- Delete redundant verifications code [`9e88708`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/9e887089175a6d29e5a99c2a7bba60998ccfac9c)
- Further changes to support licence claim/verify [`f6ac332`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/f6ac332f5966a34419009c4b0dbe86af9adb4937)
- Some housekeeping... [`25e4df9`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/25e4df9f7ccd2ddb8739ed6d4faa234347f86bf7)
- Replacing some CRM routes with REST API [`6c206eb`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/6c206ebf99946150859f17501da93556d9c5b257)
- Moving verifications / documentHeaders REST api controllers to own files [`c0960d2`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/c0960d2afa4e0663436dc5873a01b67f9513941a)
- Create company and individual test entity during lab test.  Implemented delete entity [`a87dbc5`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/a87dbc5ddf369a90c7dac6808b1c86a71a0b2a89)
- Remove old APIs for naming docs [`5d08ab5`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/5d08ab54b47bb3746a8b0ce761b2efd7dd5396da)
- Adding migrations for entity/document verification [`8c045b6`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/8c045b6cd6ca154f3db47bcd5f5dca817bf688c5)
- implement water-560 [`8b3574e`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/8b3574e06828ba1d42790594933a117529380c0c)
- Add unit test for creating verification [`ba999fa`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/ba999fa6cb87df9479f6e7c8f8b411d13342fc88)
- include view + endpoint for returning roles with entity name and type [`ad6a9fa`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/ad6a9faf79b0272e0aa39dfa70b5cc1db942da3a)
- CRM support for document names [`5e91daf`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/5e91daf8b40e50c5d4ecaec35f89e147a03b1da8)
- Ability to POST/GET list of document IDs in verification request [`0dcc545`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/0dcc54581bc0c5243410c0889c2ba4e4653826ed)
- Create and delete documentHeader as part of verify test.  Implement delete documentHeader call [`b1acd98`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/b1acd98de7e35eaf3b75ebe49627aa182d860f0f)
- Create join table for verification documents [`da34c8d`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/da34c8d04864bd66b7694fb1ab4ef6b3d284a68c)
- Update unit tests [`0977f2b`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/0977f2b1c547d92e32a3663e41d5b543d53e9eca)
- POST, GET and DELETE roles for entity_id [`4c3a6b7`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/4c3a6b7b46d0793d71682fca8d6a5135e5a3a2c0)
- Changes to support multi user access to permits [`0c4a760`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/0c4a760499bb9497d3da9b1a019f1a09e2deac44)
- Rewrite lab before/after hooks async that return value [`7394216`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/73942168302ea16d97842c08b9cfdea4d2cfb82d)
- Lower case email filter [`1ea41e3`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/1ea41e3d367b3ecac0cd605569bb52e94378568b)
- Add method to generate verification record [`ee2cb47`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/ee2cb475c357523902ec5b7f229c370962257c38)
- Add node script to create schema to resolve issue with db-migrate on Travis [`b2d5148`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/b2d514882acc227d87beda778f0a19a3d48cc122)
- migration scripts for data [`bf96eef`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/bf96eef1df22ca6e61a5bee545f81c54f5687a8e)
- Added doc header verification method [`453e922`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/453e9221eedcbac623a2d384693b163a2d094670)
- Starting to use REST API for more routes [`4ec2568`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/4ec25682875151119f36aa946c1a716e9fe35347)
- assign document to entity [`5b0e3e9`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/5b0e3e9a2df6023f4153b3e0539ce47a63e2dc5f)
- remove owner id [`0db0b91`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/0db0b91d11c811c12ad64fead019b11aa6823d90)
- Replace bulk patch documentheaders with REST API version [`5c45d60`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/5c45d60f3473ed076f7cc730361139174b29e83a)
- Update unit tests [`07f2e49`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/07f2e49705d55ce5b55ae67cdd6249fa36d46b4b)
- role_document_access view exposed at document_role_access endpoint to enable finding primary user for a document [`43c6aeb`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/43c6aebe6d13cde077c20a157f88f6ba285ad1d3)
- Update travis.yml [`32cd233`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/32cd23336b2f18a0cf55360a5ce5008102cbe37f)
- general ammendments [`3c1923d`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/3c1923d7e54e543ad5979cb805f13ec8acf351b0)
- blipp and errbit [`8218c58`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/8218c5816b4e2d57a80fe8b76ed5a2da40c62801)
- Support sorting [`ee8fbe9`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/ee8fbe9ac9c4b3f129368b6977467850c822b9a9)
- Fix issue with multiple document verification [`730776b`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/730776ba1799b6ff30b5d967748cc36b380f85c0)
- Number params for SQL [`341ad7e`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/341ad7e30fa625c461d81f2497b7d87dec6be1c0)
- Handle case where email/entity not found [`0707e3e`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/0707e3e9c4f43b31b7564efea4a11f704e28c275)
- Modify role doc filter to only return current docs [`636d45d`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/636d45dba31de566c8a121c31797831cecfa12e1)
- add functions [`1f53c1c`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/1f53c1cefe6d509daeda82cb8463824d4e87120e)
- bug-717 again [`a8526c5`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/a8526c5598d6446a48ca7566195598487b5e1611)
- Remove entity id from document name set/get [`8526444`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/8526444c7bf0029a1047bb6e540531e77ae1f273)
- blipp and errbit [`69552de`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/69552de1ccc69c5c15cea03ae88cce65ac7ba0d3)
- Reduce line count [`443240c`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/443240c29e534fcf573b4e7c7029c2090e9a607f)
- Added back accidentally deleted deleteDocumentHeader method (not implemented) [`46645f8`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/46645f89b71c443fca7f617d38790bd8cadc92da)
- Update README.MD [`d8ddeda`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/d8ddeda158cd2e00bc8a2454f78415e0db2a170f)
- Add document postcode to returned data [`1862648`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/186264867e2800ca346963535dd532d9ca9ae40f)
- water-523 [`8a0f569`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/8a0f5698bc8824a54d0defb2383d8087d2d0ce89)
- Fix issue where sort param could be defined but empty object [`d7d5aca`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/d7d5aca281f61896c230dda38098331de1342f23)
- Add upsert to document headers [`724b41a`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/724b41abc8d65d74e821462d5efde54b074553b5)
- Log node version in test script [`d3d288b`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/d3d288b426f6bcf037f1631e436543af40842d02)
- Adding full address to CRM licence list [`92ef240`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/92ef240d8f5641a4aa38d320e6bc6cc1028b6b0b)
- Add ability to search on licence number.  Add % to search query for partial matches [`0c5513f`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/0c5513fba666a61a4f2a557e8d673493d067cf68)
- Reduce complexity [`e419f13`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/e419f13c4ec2b9f7b3a46dd52715ae1ba4f80355)
- Tweak to test script [`cf17d01`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/cf17d01c92da25bb44f800cc93fb177bfc5ba4a6)
- update search query to reflect changes to metadata storage [`8f8cec8`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/8f8cec850bceb078bf26273b02af1345154e5919)
- Add ability to filter by document_id (exact match only) [`7b57142`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/7b57142741a843759ccbc83b3bbccd4292c4bf47)
- Add Joi validation for document_name field [`58ba362`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/58ba3627cdfec5be0bb962a3a4c718a93396ecf3)
- Tweak JWT auth [`ffd1cec`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/ffd1cec58ec6fa575111a7d0728a9d9dd82fc4ab)
- Add migrate task to main package.json [`9d4dfce`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/9d4dfce2014f7fbca44788c56e8bc5d2f72ff1d7)
- Updated readme [`185fc96`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/185fc96e127b31886fa0aedc340ae309027bd28c)
- fix bug caused moving from join query to view [`cda4d60`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/cda4d60a6c2d2a8bc07eff5b342dcc2aa98dce47)
- Enables clustering in PM2 ecosystem config [`1526e26`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/1526e268a26103c1c0cb2af9976d381060f7db54)
- Remove coverage report for now [`4e971f5`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/4e971f50bac645927f2a2f9cfd97ad61b2438455)
- hotfix: remove git+ from URL for hapi-pg-rest-api [`f21be2c`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/f21be2cec3bc70f4c93d78334919a6fffaebee9c)
- Add back codecov report [`8642793`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/86427937f0c1555505da9a5b7cef4aa710e608cd)
- Add proper JWT secret/token to Travis config [`5b6ec9b`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/5b6ec9bc998efd03f5329dfbe05bbffff94a9a3b)
- Testing npm run test [`6988e02`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/6988e020b0bbfa7475f5194673e8eb29799a24ab)
- Set node engine in package.json [`6469cc3`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/6469cc3a18ffbc90840e6b7f8fce4ac2ee1af673)
- Additional data returned in filter query [`d902dd9`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/d902dd9ea6473a385ddfeb7f923805961d5070e0)
- Reduce pool size [`9d5bb57`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/9d5bb57b8f793417a6c5f0eac0a3a7329931dd48)
- fix copy/paste error [`42c504a`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/42c504a81b2249a1bcb616bdc89034939a755786)
- Adjust package files to remove git+ reference [`57b82f8`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/57b82f8c4928b90e81c354e4f75ad3d8c15108aa)
- Log errors in verify test script before/after hooks [`0c49596`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/0c49596fd51ff31271c69c1ca955584d3c14e2c8)
- Reduce threshold [`ca8a147`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/ca8a14774c742151c902644da042f404a5540b8a)
- Add build status badge to readme [`cb64ac6`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/cb64ac653342f0e0116048ac71b38656424bffb5)
- Remove quotes from schema name [`026027a`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/026027a837dc1f6309bf6612e4721ea3d9b340bb)
- WATER-736 - Can't register licences - 'Something went wrong' after 'select address' step [`952da5e`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/952da5e5ccd805409cb139a44893563330dfa1af)
- Update README.MD [`fb528b2`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/fb528b2cdcefe8da17f109f1176b0a79c6fe01b0)
- too many params in query [`0839962`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/08399627d9965e2c105f20b6cefd6769833c5aea)
- fix migrate issue [`defbba4`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/defbba41187056a019692cba2360ef0d5a588ace)
- Filthy fix, direct to github [`c53f5a1`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/c53f5a18ba8e8da2ea891b8e040103d4fef7bbb2)
- return distinct licences with minimal response fields in search page [`8f75e56`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/8f75e5623791fbd7d114f76fb7d707f91681c16c)
- fix query issue [`912e576`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/912e57621c54c44a8bca770a8620b6978d38719e)
- typo [`36a53f0`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/36a53f04e6b5ef2d78d95bf1e7c24d2e88734988)
- Create schema in migrations [`64e804a`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/64e804aa2ff221de9c497903e0ff533f9a6eecea)
- Remove docs for now [`58d1c8d`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/58d1c8d3fba8025c6caf871e7c95f9576561397e)
- Rename travis file [`cec1d7b`](https://github.com/DEFRA/water-abstraction-tactical-crm/commit/cec1d7b617e4a1f39f23164a6aabce6d4a2f150b)
